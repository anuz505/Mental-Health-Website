<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/individual_lesson.css" />
    <title>Beginner Lessons</title>
  </head>
  <header style="background-color: white">
    <h1>AuraSync</h1>
    <nav>
      <a href="/Project/index.html">Home</a>
      <a href="#about">About</a>
      <a href="/Project/lesson.html" class="active">Lessons</a>
      <a href="#Profile">Profile</a>
    </nav>
  </header>
  <body>
    <div class="lessons" style="margin-left: 10%">
      <div class="lesson1" style="height: 75vh">
        <div class="text" style="width: 350px; padding: 20px">
          <h1 class="l1">Lesson 1</h1>
          <h1>Box breathing</h1>
          <p>10-15 minutes</p>
          <p>
            <b>Objective:</b> To develop deeper focus and awareness of breath,
            helping to calm the mind and reduce stress.
          </p>
          <ul>
            <li>
              Sit in a comfortable position with your back straight. Continue
              this pattern for 10 minutes, aiming to build a sense of inner
              peace and calm.
            </li>
            <li>Close your eyes and bring your attention to your breath.</li>
            <li>
              Take slow, deep breaths, inhaling through your nose for 4 counts,
              holding for 4, and exhaling for 4 counts.
            </li>
            <li>
              As you breathe, let go of any thoughts that come into your mind,
              bringing your focus back to your breath.
            </li>
          </ul>
        </div>

        <div class="timer-container">
          <div class="timer-display" id="timer">00:00:00</div>
          <div class="buttons">
            <button id="start-btn" class="btn">Start</button>
            <button id="pause-btn" class="btn">Pause</button>
            <button id="reset-btn" class="btn">Reset</button>
          </div>
        </div>
      </div>
      <div class="gif-box-breathing">
        <img
          loading="lazy"
          decoding="async"
          width="700"
          ;
          height="385"
          ;;
          src="https://www.rhodeahead.com/sites/rhodeahead.com/files/field/image/IER-685753_Box_breathing_1280x800-FA2_0.gif"
          data-lazy-type="image"
          data-lazy-src="https://opryshok.com/wp-content/uploads/2023/10/4-7-8
        breathing.gif"
          alt="What is the 4-7-8 breathing method"
          class="lazy wp-image-3294 lazy-loaded"
        />
      </div>

      <button id="next" class="next">Next</button>
      <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>

          <h2>
            üéâ Amazing Work! You've Mastered the Box Breathing Technique! üéâ
          </h2>
          <b>Badge Earned: "Serene Mind" üßò‚Äç‚ôÇÔ∏è</b>
          <p>
            You've successfully completed the box breathing exercise! Feel the
            peace within you, and remember, this is a powerful tool to center
            yourself anytime.
          </p>
          <button id="continue">Continue</button>
        </div>
      </div>
    </div>
  </body>
  <script>
    let timerInterval;
    let elapsedTime = 0;
    let isPaused = true;

    const timerDisplay = document.getElementById("timer");
    const startBtn = document.getElementById("start-btn");
    const pauseBtn = document.getElementById("pause-btn");
    const resetBtn = document.getElementById("reset-btn");

    function updateTime() {
      const hours = Math.floor(elapsedTime / 3600);
      const minutes = Math.floor((elapsedTime % 3600) / 60);
      const seconds = elapsedTime % 60;

      timerDisplay.textContent = `${String(hours).padStart(2, "0")}:${String(
        minutes
      ).padStart(2, "0")}:${String(seconds).padStart(2, "0")}`;
    }

    function startTimer() {
      if (isPaused) {
        isPaused = false;
        timerInterval = setInterval(() => {
          elapsedTime++;
          updateTime();
        }, 1000);
      }
    }

    function pauseTimer() {
      isPaused = true;
      clearInterval(timerInterval);
    }

    function resetTimer() {
      isPaused = true;
      clearInterval(timerInterval);
      elapsedTime = 0;
      updateTime();
    }

    startBtn.addEventListener("click", startTimer);
    pauseBtn.addEventListener("click", pauseTimer);
    resetBtn.addEventListener("click", resetTimer);

    updateTime(); // Initial display

    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("next");

    var continueBTN = document.getElementById("continue");

    var span = document.getElementsByClassName("close")[0];

    btn.onclick = () => {
      modal.style.display = "block";
    };
    span.onclick = function () {
      modal.style.display = "none";
    };

    continueBTN.onclick = () => {
      // Get the existing badges from local storage or initialize an empty array
      let badges = JSON.parse(localStorage.getItem("badges")) || [];

      // Add the new badge to the array
      badges.push("serene_mind");

      // Store the updated array back in local storage
      localStorage.setItem("badges", JSON.stringify(badges));
      window.location.href = "./intermediate_level_2.html";
    };
  </script>
</html>
